<div class="navbar" role="navigation">
    <nav class="menu" aria-label="Main Navigation">
        <a href="{{ .Site.Home.Permalink }}" class="logo">
            {{ partial "svgs/home.svg" (dict "height" 25 "width" 25) . }}
        </a>
        <input type="checkbox" id="menu-trigger" class="menu-trigger" />
        <label for="menu-trigger">
            <span class="menu-icon">
                {{ partial "svgs/menu.svg" (dict "height" 25 "width" 25) . }}
            </span>
        </label>

        <div class="trigger">
            <ul class="trigger-container">
                {{ $currentPage := . }}
                {{ range .Site.Menus.main }}
                <li>
                    <a class="menu-link {{ if or ($currentPage.IsMenuCurrent "main" .)
                        ($currentPage.HasMenuCurrent "main" .) }}active{{ end }}" href="{{ .URL }}">
                        {{ .Name }}
                    </a>
                    {{ if .HasChildren }}
                    <ul>
                        {{ range .Children }}
                        <li>
                            <a class="menu-link {{ if $currentPage.IsMenuCurrent "main" . }}active{{ end }}"
                                href="{{ .URL }}">
                                {{ .Name }}
                            </a>
                        </li>
                        {{ end }}
                    </ul>
                    {{ end }}
                </li>
                {{ end }}
                <li class="menu-separator">
                    <span>|</span>
                </li>
                <!-- Language List -->
                {{ if .IsTranslated }}
                    <li>
                        <select aria-label="Select Language" class="lang-list" id="select-language" onchange="location = this.value;">
                            {{ $siteLanguages := .Site.Languages}}
                            {{ $pageLang := .Page.Lang}}
                            {{ range .Page.AllTranslations }}
                                {{ $translation := .}}
                                {{ range $siteLanguages }}
                                    {{ if eq $translation.Lang .Lang }}
                                        {{ $selected := false }}
                                        {{ if eq $pageLang .Lang}}
                                            <option id="{{ $translation.Language }}" value="{{ $translation.Permalink }}" selected>{{ .LanguageCode | upper }}
                                            </option>
                                        {{ else }}
                                            <option id="{{ $translation.Language }}" value="{{ $translation.Permalink }}">{{ .LanguageCode | upper }}</option>
                                        {{ end }}
                                    {{ end }}
                                {{ end }}
                            {{ end }}
                        </select>
                    </li>
                    <li class="menu-separator">
                        <span>|</span>
                    </li>
                {{ end }}
            </ul>
            <button id="mode" class="mode-toggle" type="button" aria-label="切换主题">
                <svg class="mode-icon mode-icon-sun" xmlns="http://www.w3.org/2000/svg" width="23" height="23"
                    viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                    stroke-linejoin="round" aria-hidden="true">
                    <circle cx="12" cy="12" r="4.5" />
                    <line x1="12" y1="2" x2="12" y2="4.5" />
                    <line x1="12" y1="19.5" x2="12" y2="22" />
                    <line x1="4.22" y1="4.22" x2="5.9" y2="5.9" />
                    <line x1="18.1" y1="18.1" x2="19.78" y2="19.78" />
                    <line x1="2" y1="12" x2="4.5" y2="12" />
                    <line x1="19.5" y1="12" x2="22" y2="12" />
                    <line x1="4.22" y1="19.78" x2="5.9" y2="18.1" />
                    <line x1="18.1" y1="5.9" x2="19.78" y2="4.22" />
                </svg>
                <svg class="mode-icon mode-icon-moon" xmlns="http://www.w3.org/2000/svg" width="23" height="23"
                    viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                    stroke-linejoin="round" aria-hidden="true">
                    <path
                        d="M21 12.79a8.5 8.5 0 1 1-9.79-9.79 7 7 0 0 0 9.79 9.79z" />
                </svg>
            </button>
        </div>
    </nav>
</div>
